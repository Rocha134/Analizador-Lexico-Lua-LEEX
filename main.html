<link rel = "stylesheet" href="coloreado.css"><span class=comentario>--Game made by Iker Guerrero on 06/10/2020 for CS50
</span><br><span class=identifier>Class</span><span class=operator>=</span><span class=identifier>require</span><span class=string>"class"</span><br><br><span class=identifier>push</span><span class=operator>=</span><span class=identifier>require</span><span class=string>"push"</span><br><span class=identifier>require</span><span class=string>"Level"</span><br><span class=identifier>require</span><span class=string>"Player"</span><br><span class=identifier>require</span><span class=string>"Utility"</span><br><span class=identifier>require</span><span class=string>"levels"</span><br><span class=identifier>require</span><span class=string>"Switch"</span><br><br><span class=identifier>WINDOW_WIDTH</span><span class=operator>=</span><span class=int>1920</span><br><span class=identifier>WINDOW_HEIGHT</span><span class=operator>=</span><span class=int>1080</span><br><br><span class=identifier>VIRTUAL_WIDTH</span><span class=operator>=</span><span class=int>640</span><br><span class=identifier>VIRTUAL_HEIGHT</span><span class=operator>=</span><span class=int>360</span><br><br><span class=identifier>player</span><span class=operator>=</span><span class=identifier>Player</span><span class=delimitador>(</span><span class=delimitador>)</span><br><br><span class=keyword>function</span><span class=identifier>love</span><span class=avanzado>.</span><span class=identifier>load</span><span class=delimitador>(</span><span class=delimitador>)</span><br><br><span class=identifier>love</span><span class=avanzado>.</span><span class=identifier>graphics</span><span class=avanzado>.</span><span class=identifier>setDefaultFilter</span><span class=delimitador>(</span><span class=string>'nearest', 'nearest'</span><span class=delimitador>)</span><br><span class=identifier>bigfont</span><span class=operator>=</span><span class=identifier>love</span><span class=avanzado>.</span><span class=identifier>graphics</span><span class=avanzado>.</span><span class=identifier>newFont</span><span class=delimitador>(</span><span class=string>'font.ttf'</span><span class=avanzado>,</span><span class=int>20</span><span class=delimitador>)</span><br><span class=identifier>smallfont</span><span class=operator>=</span><span class=identifier>love</span><span class=avanzado>.</span><span class=identifier>graphics</span><span class=avanzado>.</span><span class=identifier>newFont</span><span class=delimitador>(</span><span class=string>"font.ttf"</span><span class=avanzado>,</span><span class=int>15</span><span class=delimitador>)</span><br><span class=identifier>giantfont</span><span class=operator>=</span><span class=identifier>love</span><span class=avanzado>.</span><span class=identifier>graphics</span><span class=avanzado>.</span><span class=identifier>newFont</span><span class=delimitador>(</span><span class=string>"font.ttf"</span><span class=avanzado>,</span><span class=int>30</span><span class=delimitador>)</span><br><br><span class=identifier>finished</span><span class=operator>=</span><span class=keyword>false</span><br><span class=identifier>currentlevel</span><span class=operator>=</span><span class=int>1</span><br><span class=identifier>loadlevel</span><span class=delimitador>(</span><span class=identifier>currentlevel</span><span class=delimitador>)</span><br><br><span class=identifier>push</span><span class=avanzado>:</span><span class=identifier>setupScreen</span><span class=delimitador>(</span><span class=identifier>VIRTUAL_WIDTH</span><span class=avanzado>,</span><span class=identifier>VIRTUAL_HEIGHT</span><span class=avanzado>,</span><span class=identifier>WINDOW_WIDTH</span><span class=avanzado>,</span><span class=identifier>WINDOW_HEIGHT</span><span class=avanzado>,</span><span class=delimitador>{</span><br><span class=identifier>fullscreen</span><span class=operator>=</span><span class=keyword>true</span><span class=avanzado>,</span><br><span class=identifier>resizable</span><span class=operator>=</span><span class=keyword>true</span><span class=avanzado>,</span><br><span class=identifier>vsync</span><span class=operator>=</span><span class=keyword>true</span><br><span class=delimitador>}</span><span class=delimitador>)</span><br><br><span class=identifier>love</span><span class=avanzado>.</span><span class=identifier>window</span><span class=avanzado>.</span><span class=identifier>setTitle</span><span class=delimitador>(</span><span class=string>'Block'</span><span class=delimitador>)</span><br><span class=keyword>end</span><br><br><br><span class=keyword>function</span><span class=identifier>loadlevel</span><span class=delimitador>(</span><span class=identifier>num</span><span class=delimitador>)</span><br><span class=keyword>if</span><span class=identifier>num</span><span class=operator>==</span><span class=int>1</span><span class=keyword>then</span><br><span class=identifier>level</span><span class=operator>=</span><span class=identifier>Convert</span><span class=delimitador>(</span><span class=identifier>LevelA1</span><span class=avanzado>,</span><span class=int>9</span><span class=avanzado>,</span><span class=int>9</span><span class=avanzado>,</span><span class=int>3</span><span class=avanzado>,</span><span class=identifier>player</span><span class=delimitador>)</span><br><span class=keyword>elseif</span><span class=identifier>num</span><span class=operator>==</span><span class=int>2</span><span class=keyword>then</span><br><span class=identifier>level</span><span class=operator>=</span><span class=identifier>Convert</span><span class=delimitador>(</span><span class=identifier>LevelA2</span><span class=avanzado>,</span><span class=int>5</span><span class=avanzado>,</span><span class=int>7</span><span class=avanzado>,</span><span class=int>2</span><span class=avanzado>,</span><span class=identifier>player</span><span class=delimitador>)</span><br><span class=keyword>elseif</span><span class=identifier>num</span><span class=operator>==</span><span class=int>3</span><span class=keyword>then</span><br><span class=identifier>level</span><span class=operator>=</span><span class=identifier>Convert</span><span class=delimitador>(</span><span class=identifier>LevelA3</span><span class=avanzado>,</span><span class=int>9</span><span class=avanzado>,</span><span class=int>9</span><span class=avanzado>,</span><span class=int>3</span><span class=avanzado>,</span><span class=identifier>player</span><span class=delimitador>)</span><br><span class=keyword>elseif</span><span class=identifier>num</span><span class=operator>==</span><span class=int>4</span><span class=keyword>then</span><br><span class=identifier>level</span><span class=operator>=</span><span class=identifier>Convert</span><span class=delimitador>(</span><span class=identifier>LevelA4</span><span class=avanzado>,</span><span class=int>8</span><span class=avanzado>,</span><span class=int>8</span><span class=avanzado>,</span><span class=int>3</span><span class=avanzado>,</span><span class=identifier>player</span><span class=delimitador>)</span><br><span class=keyword>elseif</span><span class=identifier>num</span><span class=operator>==</span><span class=int>5</span><span class=keyword>then</span><br><span class=identifier>level</span><span class=operator>=</span><span class=identifier>Convert</span><span class=delimitador>(</span><span class=identifier>LevelA5</span><span class=avanzado>,</span><span class=int>10</span><span class=avanzado>,</span><span class=int>11</span><span class=avanzado>,</span><span class=int>4</span><span class=avanzado>,</span><span class=identifier>player</span><span class=delimitador>)</span><br><span class=keyword>else</span><br><span class=identifier>level</span><span class=operator>=</span><span class=identifier>Convert</span><span class=delimitador>(</span><span class=identifier>Testlevel</span><span class=avanzado>,</span><span class=int>9</span><span class=avanzado>,</span><span class=int>9</span><span class=avanzado>,</span><span class=int>4</span><span class=avanzado>,</span><span class=identifier>player</span><span class=delimitador>)</span><br><span class=identifier>finished</span><span class=operator>=</span><span class=keyword>true</span><br><span class=keyword>end</span><br><span class=keyword>end</span><br><br><span class=keyword>function</span><span class=identifier>love</span><span class=avanzado>.</span><span class=identifier>update</span><span class=delimitador>(</span><span class=delimitador>)</span><br><span class=keyword>if</span><span class=keyword>not</span><span class=identifier>finished</span><span class=keyword>then</span><br><span class=keyword>if</span><span class=identifier>hasWon</span><span class=delimitador>(</span><span class=delimitador>)</span><span class=keyword>then</span><br><span class=identifier>currentlevel</span><span class=operator>=</span><span class=identifier>currentlevel</span><span class=operator>+</span><span class=int>1</span><br><span class=identifier>loadlevel</span><span class=delimitador>(</span><span class=identifier>currentlevel</span><span class=delimitador>)</span><br><span class=keyword>end</span><br><span class=keyword>end</span><br><span class=identifier>level</span><span class=avanzado>:</span><span class=identifier>CheckSwitches</span><span class=delimitador>(</span><span class=identifier>player</span><span class=delimitador>)</span><br><span class=keyword>end</span><br><br><span class=keyword>function</span><span class=identifier>hasWon</span><span class=delimitador>(</span><span class=delimitador>)</span><br><span class=keyword>if</span><span class=identifier>level</span><span class=avanzado>.</span><span class=identifier>layout</span><span class=delimitador>[</span><span class=identifier>player</span><span class=avanzado>.</span><span class=identifier>gridx</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>player</span><span class=avanzado>.</span><span class=identifier>gridy</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>player</span><span class=avanzado>.</span><span class=identifier>gridz</span><span class=operator>-</span><span class=int>1</span><span class=delimitador>]</span><span class=operator>==</span><span class=string>"goal"</span><span class=keyword>then</span><br><span class=keyword>return</span><span class=keyword>true</span><br><span class=keyword>else</span><br><span class=keyword>return</span><span class=keyword>false</span><br><span class=keyword>end</span><br><span class=keyword>end</span><br><br><span class=keyword>function</span><span class=identifier>love</span><span class=avanzado>.</span><span class=identifier>keypressed</span><span class=delimitador>(</span><span class=identifier>key</span><span class=delimitador>)</span><br><span class=keyword>if</span><span class=identifier>key</span><span class=operator>==</span><span class=string>"escape"</span><span class=keyword>then</span><br><span class=identifier>love</span><span class=avanzado>.</span><span class=identifier>event</span><span class=avanzado>.</span><span class=identifier>quit</span><span class=delimitador>(</span><span class=delimitador>)</span><br><span class=keyword>elseif</span><span class=identifier>key</span><span class=operator>==</span><span class=string>"up" or key == "w"</span><span class=keyword>then</span><br><span class=identifier>player</span><span class=avanzado>:</span><span class=identifier>move</span><span class=delimitador>(</span><span class=operator>-</span><span class=int>1</span><span class=avanzado>,</span><span class=int>0</span><span class=avanzado>,</span><span class=identifier>level</span><span class=delimitador>)</span><br><span class=keyword>elseif</span><span class=identifier>key</span><span class=operator>==</span><span class=string>"down" or key == "s"</span><span class=keyword>then</span><br><span class=identifier>player</span><span class=avanzado>:</span><span class=identifier>move</span><span class=delimitador>(</span><span class=int>1</span><span class=avanzado>,</span><span class=int>0</span><span class=avanzado>,</span><span class=identifier>level</span><span class=delimitador>)</span><br><span class=keyword>elseif</span><span class=identifier>key</span><span class=operator>==</span><span class=string>"left" or key == "a"</span><span class=keyword>then</span><br><span class=identifier>player</span><span class=avanzado>:</span><span class=identifier>move</span><span class=delimitador>(</span><span class=int>0</span><span class=avanzado>,</span><span class=int>1</span><span class=avanzado>,</span><span class=identifier>level</span><span class=delimitador>)</span><br><span class=keyword>elseif</span><span class=identifier>key</span><span class=operator>==</span><span class=string>"right" or key == "d"</span><span class=keyword>then</span><br><span class=identifier>player</span><span class=avanzado>:</span><span class=identifier>move</span><span class=delimitador>(</span><span class=int>0</span><span class=avanzado>,</span><span class=operator>-</span><span class=int>1</span><span class=avanzado>,</span><span class=identifier>level</span><span class=delimitador>)</span><br><span class=keyword>elseif</span><span class=identifier>key</span><span class=operator>==</span><span class=string>"r"</span><span class=keyword>then</span><br><span class=identifier>loadlevel</span><span class=delimitador>(</span><span class=identifier>currentlevel</span><span class=delimitador>)</span><br><span class=keyword>end</span><br><br><span class=keyword>end</span><br><br><br><span class=keyword>function</span><span class=identifier>love</span><span class=avanzado>.</span><span class=identifier>draw</span><span class=delimitador>(</span><span class=delimitador>)</span><br><span class=identifier>push</span><span class=avanzado>:</span><span class=identifier>apply</span><span class=delimitador>(</span><span class=string>"start"</span><span class=delimitador>)</span><br><span class=identifier>switch1</span><span class=operator>=</span><span class=identifier>Switch</span><span class=delimitador>(</span><span class=int>0</span><span class=avanzado>,</span><span class=int>0</span><span class=avanzado>,</span><span class=int>0</span><span class=avanzado>,</span><span class=string>"Hola"</span><span class=delimitador>)</span><br><span class=keyword>if</span><span class=keyword>not</span><span class=identifier>finished</span><span class=keyword>then</span><br><span class=identifier>love</span><span class=avanzado>.</span><span class=identifier>graphics</span><span class=avanzado>.</span><span class=identifier>setFont</span><span class=delimitador>(</span><span class=identifier>bigfont</span><span class=delimitador>)</span><br><span class=identifier>love</span><span class=avanzado>.</span><span class=identifier>graphics</span><span class=avanzado>.</span><span class=identifier>print</span><span class=delimitador>(</span><span class=string>"Level "</span><span class=operator>..</span><span class=identifier>tostring</span><span class=delimitador>(</span><span class=identifier>currentlevel</span><span class=delimitador>)</span><span class=avanzado>,</span><span class=int>45</span><span class=avanzado>,</span><span class=int>15</span><span class=delimitador>)</span><br><span class=identifier>love</span><span class=avanzado>.</span><span class=identifier>graphics</span><span class=avanzado>.</span><span class=identifier>setFont</span><span class=delimitador>(</span><span class=identifier>smallfont</span><span class=delimitador>)</span><br><span class=identifier>love</span><span class=avanzado>.</span><span class=identifier>graphics</span><span class=avanzado>.</span><span class=identifier>print</span><span class=delimitador>(</span><span class=string>"Press R to restart"</span><span class=avanzado>,</span><span class=int>10</span><span class=avanzado>,</span><span class=int>35</span><span class=delimitador>)</span><br><span class=keyword>else</span><br><span class=identifier>love</span><span class=avanzado>.</span><span class=identifier>graphics</span><span class=avanzado>.</span><span class=identifier>setFont</span><span class=delimitador>(</span><span class=identifier>giantfont</span><span class=delimitador>)</span><br><span class=identifier>love</span><span class=avanzado>.</span><span class=identifier>graphics</span><span class=avanzado>.</span><span class=identifier>print</span><span class=delimitador>(</span><span class=string>"Thanks for playing"</span><span class=avanzado>,</span><span class=identifier>VIRTUAL_WIDTH</span><span class=operator>/</span><span class=int>2</span><span class=operator>-</span><span class=int>150</span><span class=avanzado>,</span><span class=int>100</span><span class=delimitador>)</span><br><span class=identifier>love</span><span class=avanzado>.</span><span class=identifier>graphics</span><span class=avanzado>.</span><span class=identifier>setFont</span><span class=delimitador>(</span><span class=identifier>smallfont</span><span class=delimitador>)</span><br><span class=identifier>love</span><span class=avanzado>.</span><span class=identifier>graphics</span><span class=avanzado>.</span><span class=identifier>print</span><span class=delimitador>(</span><span class=string>"Press Esc to exit"</span><span class=avanzado>,</span><span class=identifier>VIRTUAL_WIDTH</span><span class=operator>/</span><span class=int>2</span><span class=operator>-</span><span class=int>80</span><span class=avanzado>,</span><span class=int>150</span><span class=delimitador>)</span><br><span class=keyword>end</span><br><span class=identifier>level</span><span class=avanzado>:</span><span class=identifier>render</span><span class=delimitador>(</span><span class=identifier>player</span><span class=delimitador>)</span><br><br><span class=identifier>push</span><span class=avanzado>:</span><span class=identifier>apply</span><span class=delimitador>(</span><span class=string>"end"</span><span class=delimitador>)</span><br><span class=keyword>end</span>