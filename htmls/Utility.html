<link rel = "stylesheet" href="coloreado.css"><body> <p><br><span class=keyword>local</span><span class=espacio> </span><span class=identifier>ID_EMPTY</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=string>"e"</span><br><span class=keyword>local</span><span class=espacio> </span><span class=identifier>ID_MAIN</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=string>"m"</span><br><span class=keyword>local</span><span class=espacio> </span><span class=identifier>ID_FLOOR</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=string>"f"</span><br><span class=keyword>local</span><span class=espacio> </span><span class=identifier>ID_WALL</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=string>"w"</span><br><span class=keyword>local</span><span class=espacio> </span><span class=identifier>ID_ROCK</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=string>"r"</span><br><span class=keyword>local</span><span class=espacio> </span><span class=identifier>ID_GOAL</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=string>"g"</span><br><span class=keyword>local</span><span class=espacio> </span><span class=identifier>ID_SWITCH</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=string>"s"</span><br><span class=keyword>local</span><span class=espacio> </span><span class=identifier>ID_PISTON</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=string>"p"</span><br><span class=keyword>local</span><span class=espacio> </span><span class=identifier>ID_LINESKIP</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=string>"0"</span><br><span class=keyword>local</span><span class=espacio> </span><span class=identifier>ID_PLANESKIP</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=string>"1"</span><br><br><span class=identifier>require</span><span class=espacio> </span><span class=string>"Level"</span><br><span class=identifier>require</span><span class=espacio> </span><span class=string>"Switch"</span><br><span class=identifier>require</span><span class=espacio> </span><span class=string>"Piston"</span><br><br><span class=keyword>function</span><span class=espacio> </span><span class=identifier>Convert</span><span class=delimitador>(</span><span class=identifier>code</span><span class=puntuacion>,</span><span class=espacio> </span><span class=identifier>maxx</span><span class=puntuacion>,</span><span class=espacio> </span><span class=identifier>maxy</span><span class=puntuacion>,</span><span class=espacio> </span><span class=identifier>maxz</span><span class=puntuacion>,</span><span class=espacio> </span><span class=identifier>player</span><span class=delimitador>)</span><br>&emsp;<span class=keyword>local</span><span class=espacio> </span><span class=identifier>alevel</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=identifier>Level</span><span class=delimitador>(</span><span class=identifier>maxx</span><span class=puntuacion>,</span><span class=espacio> </span><span class=identifier>maxy</span><span class=puntuacion>,</span><span class=espacio> </span><span class=identifier>maxz</span><span class=delimitador>)</span><br>&emsp;<span class=keyword>for</span><span class=espacio> </span><span class=identifier>x</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=int>0</span><span class=puntuacion>,</span><span class=espacio> </span><span class=identifier>maxx</span><span class=espacio> </span><span class=keyword>do</span><br>&emsp;&emsp;<span class=identifier>alevel</span><span class=puntuacion>.</span><span class=identifier>layout</span><span class=delimitador>[</span><span class=identifier>x</span><span class=delimitador>]</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=delimitador>{</span><span class=delimitador>}</span><br>&emsp;&emsp;<span class=keyword>for</span><span class=espacio> </span><span class=identifier>y</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=int>0</span><span class=puntuacion>,</span><span class=espacio> </span><span class=identifier>maxy</span><span class=espacio> </span><span class=keyword>do</span><br>&emsp;&emsp;&emsp;<span class=identifier>alevel</span><span class=puntuacion>.</span><span class=identifier>layout</span><span class=delimitador>[</span><span class=identifier>x</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>y</span><span class=delimitador>]</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=delimitador>{</span><span class=delimitador>}</span><br>&emsp;&emsp;&emsp;<span class=keyword>for</span><span class=espacio> </span><span class=identifier>z</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=int>0</span><span class=puntuacion>,</span><span class=espacio> </span><span class=identifier>maxz</span><span class=espacio> </span><span class=keyword>do</span><br>&emsp;&emsp;&emsp;&emsp;<span class=identifier>alevel</span><span class=puntuacion>.</span><span class=identifier>layout</span><span class=delimitador>[</span><span class=identifier>x</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>y</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>z</span><span class=delimitador>]</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=string>"empty"</span><br>&emsp;&emsp;&emsp;<span class=keyword>end</span><br>&emsp;&emsp;<span class=keyword>end</span><br>&emsp;<span class=keyword>end</span><br>&emsp;<span class=identifier>tempx</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=int>0</span><br>&emsp;<span class=identifier>tempy</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=int>0</span><br>&emsp;<span class=identifier>tempz</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=int>0</span><br>&emsp;<span class=keyword>for</span><span class=espacio> </span><span class=identifier>i</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=int>1</span><span class=puntuacion>,</span><span class=espacio> </span><span class=operator>#</span><span class=identifier>code</span><span class=espacio> </span><span class=keyword>do</span><br>&emsp;&emsp;<span class=keyword>local</span><span class=espacio> </span><span class=identifier>c</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=identifier>code</span><span class=puntuacion>:</span><span class=identifier>sub</span><span class=delimitador>(</span><span class=identifier>i</span><span class=puntuacion>,</span><span class=espacio> </span><span class=identifier>i</span><span class=delimitador>)</span><br>&emsp;&emsp;<span class=keyword>if</span><span class=espacio> </span><span class=identifier>c</span><span class=espacio> </span><span class=operator>==</span><span class=espacio> </span><span class=identifier>ID_FLOOR</span><span class=espacio> </span><span class=keyword>then</span><br>&emsp;&emsp;&emsp;<span class=identifier>alevel</span><span class=puntuacion>.</span><span class=identifier>layout</span><span class=delimitador>[</span><span class=identifier>tempx</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>tempy</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>tempz</span><span class=delimitador>]</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=string>"floor"</span><br>&emsp;&emsp;&emsp;<span class=identifier>tempx</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=identifier>tempx</span><span class=espacio> </span><span class=operator>+</span><span class=espacio> </span><span class=int>1</span><br>&emsp;&emsp;<span class=keyword>elseif</span><span class=espacio> </span><span class=identifier>c</span><span class=espacio> </span><span class=operator>==</span><span class=espacio> </span><span class=identifier>ID_MAIN</span><span class=espacio> </span><span class=keyword>then</span><br>&emsp;&emsp;&emsp;<span class=identifier>alevel</span><span class=puntuacion>.</span><span class=identifier>layout</span><span class=delimitador>[</span><span class=identifier>tempx</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>tempy</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>tempz</span><span class=delimitador>]</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=string>"main"</span><br>&emsp;&emsp;&emsp;<span class=identifier>player</span><span class=puntuacion>.</span><span class=identifier>gridx</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=identifier>tempx</span><br>&emsp;&emsp;&emsp;<span class=identifier>player</span><span class=puntuacion>.</span><span class=identifier>gridy</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=identifier>tempy</span><br>&emsp;&emsp;&emsp;<span class=identifier>player</span><span class=puntuacion>.</span><span class=identifier>gridz</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=identifier>tempz</span><br>&emsp;&emsp;&emsp;<span class=identifier>tempx</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=identifier>tempx</span><span class=espacio> </span><span class=operator>+</span><span class=espacio> </span><span class=int>1</span><br>&emsp;&emsp;<span class=keyword>elseif</span><span class=espacio> </span><span class=identifier>c</span><span class=espacio> </span><span class=operator>==</span><span class=espacio> </span><span class=identifier>ID_WALL</span><span class=espacio> </span><span class=keyword>then</span><br>&emsp;&emsp;&emsp;<span class=identifier>alevel</span><span class=puntuacion>.</span><span class=identifier>layout</span><span class=delimitador>[</span><span class=identifier>tempx</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>tempy</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>tempz</span><span class=delimitador>]</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=string>"wall"</span><br>&emsp;&emsp;&emsp;<span class=identifier>tempx</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=identifier>tempx</span><span class=espacio> </span><span class=operator>+</span><span class=espacio> </span><span class=int>1</span><br>&emsp;&emsp;<span class=keyword>elseif</span><span class=espacio> </span><span class=identifier>c</span><span class=espacio> </span><span class=operator>==</span><span class=espacio> </span><span class=identifier>ID_ROCK</span><span class=espacio> </span><span class=keyword>then</span><br>&emsp;&emsp;&emsp;<span class=identifier>alevel</span><span class=puntuacion>.</span><span class=identifier>layout</span><span class=delimitador>[</span><span class=identifier>tempx</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>tempy</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>tempz</span><span class=delimitador>]</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=string>"rock"</span><br>&emsp;&emsp;&emsp;<span class=identifier>tempx</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=identifier>tempx</span><span class=espacio> </span><span class=operator>+</span><span class=espacio> </span><span class=int>1</span><br>&emsp;&emsp;<span class=keyword>elseif</span><span class=espacio> </span><span class=identifier>c</span><span class=espacio> </span><span class=operator>==</span><span class=espacio> </span><span class=identifier>ID_GOAL</span><span class=espacio> </span><span class=keyword>then</span><br>&emsp;&emsp;&emsp;<span class=identifier>alevel</span><span class=puntuacion>.</span><span class=identifier>layout</span><span class=delimitador>[</span><span class=identifier>tempx</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>tempy</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>tempz</span><span class=delimitador>]</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=string>"goal"</span><br>&emsp;&emsp;&emsp;<span class=identifier>tempx</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=identifier>tempx</span><span class=espacio> </span><span class=operator>+</span><span class=espacio> </span><span class=int>1</span><span class=espacio> </span><br>&emsp;&emsp;<span class=keyword>elseif</span><span class=espacio> </span><span class=identifier>c</span><span class=espacio> </span><span class=operator>==</span><span class=espacio> </span><span class=identifier>ID_SWITCH</span><span class=espacio> </span><span class=keyword>then</span><br>&emsp;&emsp;&emsp;<span class=identifier>alevel</span><span class=puntuacion>.</span><span class=identifier>layout</span><span class=delimitador>[</span><span class=identifier>tempx</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>tempy</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>tempz</span><span class=delimitador>]</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=string>"switch"</span><br>&emsp;&emsp;&emsp;<span class=identifier>alevel</span><span class=puntuacion>:</span><span class=identifier>newSwitch</span><span class=delimitador>(</span><span class=identifier>tempx</span><span class=puntuacion>,</span><span class=espacio> </span><span class=identifier>tempy</span><span class=puntuacion>,</span><span class=espacio> </span><span class=identifier>tempz</span><span class=puntuacion>,</span><span class=espacio> </span><span class=identifier>code</span><span class=puntuacion>:</span><span class=identifier>sub</span><span class=delimitador>(</span><span class=identifier>i</span><span class=espacio> </span><span class=operator>+</span><span class=espacio> </span><span class=int>1</span><span class=puntuacion>,</span><span class=espacio> </span><span class=identifier>i</span><span class=espacio> </span><span class=operator>+</span><span class=espacio> </span><span class=int>2</span><span class=delimitador>)</span><span class=delimitador>)</span><br>&emsp;&emsp;&emsp;<span class=identifier>tempx</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=identifier>tempx</span><span class=espacio> </span><span class=operator>+</span><span class=espacio> </span><span class=int>1</span><br>&emsp;&emsp;<span class=keyword>elseif</span><span class=espacio> </span><span class=identifier>c</span><span class=espacio> </span><span class=operator>==</span><span class=espacio> </span><span class=identifier>ID_PISTON</span><span class=espacio> </span><span class=keyword>then</span><br>&emsp;&emsp;&emsp;<span class=identifier>alevel</span><span class=puntuacion>.</span><span class=identifier>layout</span><span class=delimitador>[</span><span class=identifier>tempx</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>tempy</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>tempz</span><span class=delimitador>]</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=string>"piston"</span><br>&emsp;&emsp;&emsp;<span class=identifier>alevel</span><span class=puntuacion>:</span><span class=identifier>newPiston</span><span class=delimitador>(</span><span class=identifier>tempx</span><span class=puntuacion>,</span><span class=espacio> </span><span class=identifier>tempy</span><span class=puntuacion>,</span><span class=espacio> </span><span class=identifier>tempz</span><span class=puntuacion>,</span><span class=espacio> </span><span class=identifier>code</span><span class=puntuacion>:</span><span class=identifier>sub</span><span class=delimitador>(</span><span class=identifier>i</span><span class=espacio> </span><span class=operator>+</span><span class=espacio> </span><span class=int>1</span><span class=puntuacion>,</span><span class=espacio> </span><span class=identifier>i</span><span class=espacio> </span><span class=operator>+</span><span class=espacio> </span><span class=int>4</span><span class=delimitador>)</span><span class=delimitador>)</span><br>&emsp;&emsp;&emsp;<span class=identifier>tempx</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=identifier>tempx</span><span class=espacio> </span><span class=operator>+</span><span class=espacio> </span><span class=int>1</span><br>&emsp;&emsp;<span class=keyword>elseif</span><span class=espacio> </span><span class=identifier>c</span><span class=espacio> </span><span class=operator>==</span><span class=espacio> </span><span class=identifier>ID_EMPTY</span><span class=espacio> </span><span class=keyword>then</span><br>&emsp;&emsp;&emsp;<span class=identifier>alevel</span><span class=puntuacion>.</span><span class=identifier>layout</span><span class=delimitador>[</span><span class=identifier>tempx</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>tempy</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>tempz</span><span class=delimitador>]</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=string>"empty"</span><br>&emsp;&emsp;&emsp;<span class=identifier>tempx</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=identifier>tempx</span><span class=espacio> </span><span class=operator>+</span><span class=espacio> </span><span class=int>1</span><br>&emsp;&emsp;<span class=keyword>elseif</span><span class=espacio> </span><span class=identifier>c</span><span class=espacio> </span><span class=operator>==</span><span class=espacio> </span><span class=identifier>ID_LINESKIP</span><span class=espacio> </span><span class=keyword>then</span><br>&emsp;&emsp;&emsp;<span class=identifier>tempy</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=identifier>tempy</span><span class=espacio> </span><span class=operator>+</span><span class=espacio> </span><span class=int>1</span><br>&emsp;&emsp;&emsp;<span class=identifier>tempx</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=int>0</span><br>&emsp;&emsp;<span class=keyword>elseif</span><span class=espacio> </span><span class=identifier>c</span><span class=espacio> </span><span class=operator>==</span><span class=espacio> </span><span class=identifier>ID_PLANESKIP</span><span class=espacio> </span><span class=keyword>then</span><br>&emsp;&emsp;&emsp;<span class=identifier>tempx</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=int>0</span><br>&emsp;&emsp;&emsp;<span class=identifier>tempy</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=int>0</span><br>&emsp;&emsp;&emsp;<span class=identifier>tempz</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=identifier>tempz</span><span class=espacio> </span><span class=operator>+</span><span class=espacio> </span><span class=int>1</span><br>&emsp;&emsp;<span class=keyword>end</span><br>&emsp;<span class=keyword>end</span><br>&emsp;<span class=keyword>return</span><span class=espacio> </span><span class=identifier>alevel</span><br><span class=keyword>end</span><p/> <body/>