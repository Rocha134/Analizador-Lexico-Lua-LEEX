<link rel = "stylesheet" href="coloreado.css"><body> <p><br><span class=identifier>Player</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=identifier>Class</span><span class=delimitador>{</span><span class=delimitador>}</span><br><br><span class=keyword>function</span><span class=espacio> </span><span class=identifier>Player</span><span class=puntuacion>:</span><span class=identifier>init</span><span class=delimitador>(</span><span class=delimitador>)</span><br>&emsp;<span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>gridx</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=int>5</span><br>&emsp;<span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>gridy</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=int>9</span><br>&emsp;<span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>gridz</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=int>1</span><br>&emsp;<span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>music1</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=identifier>love</span><span class=puntuacion>.</span><span class=identifier>audio</span><span class=puntuacion>.</span><span class=identifier>newSource</span><span class=delimitador>(</span><span class=string>"sounds/8-Bit-Puzzler.mp3"</span><span class=puntuacion>,</span><span class=espacio> </span><span class=string>"static"</span><span class=delimitador>)</span><br>&emsp;<span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>music2</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=identifier>love</span><span class=puntuacion>.</span><span class=identifier>audio</span><span class=puntuacion>.</span><span class=identifier>newSource</span><span class=delimitador>(</span><span class=string>"sounds/Puzzle-Game_Looping.mp3"</span><span class=puntuacion>,</span><span class=espacio> </span><span class=string>"static"</span><span class=delimitador>)</span><br>&emsp;<span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>music1</span><span class=puntuacion>:</span><span class=identifier>setLooping</span><span class=delimitador>(</span><span class=keyword>true</span><span class=delimitador>)</span><br>&emsp;<span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>music1</span><span class=puntuacion>:</span><span class=identifier>play</span><span class=delimitador>(</span><span class=delimitador>)</span><br>&emsp;<span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>moveffect</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=identifier>love</span><span class=puntuacion>.</span><span class=identifier>audio</span><span class=puntuacion>.</span><span class=identifier>newSource</span><span class=delimitador>(</span><span class=string>"sounds/mover.wav"</span><span class=puntuacion>,</span><span class=espacio> </span><span class=string>"static"</span><span class=delimitador>)</span><br>&emsp;<span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>moveffect</span><span class=puntuacion>:</span><span class=identifier>setVolume</span><span class=delimitador>(</span><span class=realnum>0.2</span><span class=delimitador>)</span><br><span class=keyword>end</span><br><br><br><span class=keyword>function</span><span class=espacio> </span><span class=identifier>Player</span><span class=puntuacion>:</span><span class=identifier>move</span><span class=delimitador>(</span><span class=identifier>dx</span><span class=puntuacion>,</span><span class=espacio> </span><span class=identifier>dy</span><span class=puntuacion>,</span><span class=espacio> </span><span class=identifier>level</span><span class=delimitador>)</span><br>&emsp;<span class=identifier>report</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=identifier>level</span><span class=puntuacion>:</span><span class=identifier>statusReport</span><span class=delimitador>(</span><span class=identifier>player</span><span class=puntuacion>.</span><span class=identifier>gridx</span><span class=espacio> </span><span class=operator>+</span><span class=espacio> </span><span class=identifier>dx</span><span class=puntuacion>,</span><span class=espacio> </span><span class=identifier>player</span><span class=puntuacion>.</span><span class=identifier>gridy</span><span class=espacio> </span><span class=operator>+</span><span class=espacio> </span><span class=identifier>dy</span><span class=puntuacion>,</span><span class=espacio> </span><span class=identifier>player</span><span class=puntuacion>.</span><span class=identifier>gridz</span><span class=delimitador>)</span><br>&emsp;<span class=keyword>if</span><span class=espacio> </span><span class=identifier>report</span><span class=espacio> </span><span class=operator>==</span><span class=espacio> </span><span class=string>"free"</span><span class=espacio> </span><span class=keyword>then</span><br>&emsp;&emsp;<span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>gridx</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>gridx</span><span class=espacio> </span><span class=operator>+</span><span class=espacio> </span><span class=identifier>dx</span><br>&emsp;&emsp;<span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>gridy</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>gridy</span><span class=espacio> </span><span class=operator>+</span><span class=espacio> </span><span class=identifier>dy</span><br>&emsp;&emsp;<span class=identifier>level</span><span class=puntuacion>.</span><span class=identifier>layout</span><span class=delimitador>[</span><span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>gridx</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>gridy</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>gridz</span><span class=delimitador>]</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=string>"main"</span><br>&emsp;&emsp;<span class=identifier>level</span><span class=puntuacion>.</span><span class=identifier>layout</span><span class=delimitador>[</span><span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>gridx</span><span class=espacio> </span><span class=operator>-</span><span class=espacio> </span><span class=identifier>dx</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>gridy</span><span class=espacio> </span><span class=operator>-</span><span class=espacio> </span><span class=identifier>dy</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>gridz</span><span class=delimitador>]</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=string>"empty"</span><br>&emsp;&emsp;<span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>moveffect</span><span class=puntuacion>:</span><span class=identifier>play</span><span class=delimitador>(</span><span class=delimitador>)</span><br>&emsp;<span class=keyword>elseif</span><span class=espacio> </span><span class=identifier>report</span><span class=espacio> </span><span class=operator>==</span><span class=espacio> </span><span class=string>"movable"</span><span class=espacio> </span><span class=keyword>then</span><br>&emsp;&emsp;<span class=keyword>if</span><span class=espacio> </span><span class=identifier>level</span><span class=puntuacion>:</span><span class=identifier>push</span><span class=delimitador>(</span><span class=identifier>player</span><span class=puntuacion>.</span><span class=identifier>gridx</span><span class=espacio> </span><span class=operator>+</span><span class=espacio> </span><span class=identifier>dx</span><span class=puntuacion>,</span><span class=espacio> </span><span class=identifier>player</span><span class=puntuacion>.</span><span class=identifier>gridy</span><span class=espacio> </span><span class=operator>+</span><span class=espacio> </span><span class=identifier>dy</span><span class=puntuacion>,</span><span class=espacio> </span><span class=identifier>player</span><span class=puntuacion>.</span><span class=identifier>gridz</span><span class=puntuacion>,</span><span class=espacio> </span><span class=identifier>dx</span><span class=puntuacion>,</span><span class=espacio> </span><span class=identifier>dy</span><span class=puntuacion>,</span><span class=espacio> </span><span class=int>0</span><span class=delimitador>)</span><span class=espacio> </span><span class=keyword>then</span><br>&emsp;&emsp;&emsp;<span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>gridx</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>gridx</span><span class=espacio> </span><span class=operator>+</span><span class=espacio> </span><span class=identifier>dx</span><br>&emsp;&emsp;&emsp;<span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>gridy</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>gridy</span><span class=espacio> </span><span class=operator>+</span><span class=espacio> </span><span class=identifier>dy</span><br>&emsp;&emsp;&emsp;<span class=identifier>level</span><span class=puntuacion>.</span><span class=identifier>layout</span><span class=delimitador>[</span><span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>gridx</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>gridy</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>gridz</span><span class=delimitador>]</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=string>"main"</span><br>&emsp;&emsp;&emsp;<span class=identifier>level</span><span class=puntuacion>.</span><span class=identifier>layout</span><span class=delimitador>[</span><span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>gridx</span><span class=espacio> </span><span class=operator>-</span><span class=espacio> </span><span class=identifier>dx</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>gridy</span><span class=espacio> </span><span class=operator>-</span><span class=espacio> </span><span class=identifier>dy</span><span class=delimitador>]</span><span class=delimitador>[</span><span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>gridz</span><span class=delimitador>]</span><span class=espacio> </span><span class=operator>=</span><span class=espacio> </span><span class=string>"empty"</span><br>&emsp;&emsp;&emsp;<span class=identifier>self</span><span class=puntuacion>.</span><span class=identifier>moveffect</span><span class=puntuacion>:</span><span class=identifier>play</span><span class=delimitador>(</span><span class=delimitador>)</span><br>&emsp;&emsp;<span class=keyword>end</span><br>&emsp;<span class=keyword>end</span><br><span class=keyword>end</span><br><br><span class=comentario>--function Player:render()
</span><br>&emsp;<span class=comentario>--love.graphics.draw(self.model, VIRTUAL_WIDTH/2 + 21*(self.gridx-self.gridz) - 21*(self.gridy-self.gridz), 50 + 12*(self.gridx-self.gridz) + 12 *(self.gridy-self.gridz))
</span><br><span class=comentario>--end</span><p/> <body/>